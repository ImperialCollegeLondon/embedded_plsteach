{% extends 'base.html' %}


{% block content %}

<html>
    <head>
        <link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='styles/test.css') }}">
            <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
            <script src="http://d3js.org/d3.v3.js" charset="utf-8"></script>
            <script src="{{ url_for('static',filename='scripts/epoch.js') }}"></script>
            <link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='styles/epoch.css') }}">
                
                <script>
                    var nextTime = (function() {
                                    var currentTime = parseInt(new Date().getTime() / 1000);
                                    return function() { return currentTime++; }
                                    })();
                    </script>
                </head>
    <body>
        <h1>Real-time Line Plot Test</h1>



        <!-- Test 6 -->
        <div id="test-6" class="test">
            <h2>6. Multi Seires Stream</h2>
            <p>
            Correctly play / pause a multi series stream of values over the following plots:
            <ul>
                <li><code>x</code></li>
                <li><code>x * log(x)</code></li>
                <li><code>x * log<sup>2</sup>(x)</code></li>
            </ul>
            </p>
            <div class="epoch"></div>
            <p><button>Play</button></p>
        </div>
        
        <script>
            $(function() {
              var data = [
                          {label: 'A', values: []},
                          {label: 'B', values: []},
                          {label: 'C', values: []}
                          ],
              length = 40,
              nextIndex = length,
              scale = 0.1,
              playing = false,
              interval = null;
              for (var i = 0; i < length; i++) {
              var x = (i+1) * scale,
              time = nextTime();
              data[0].values.push({time: time, y: x});
              data[1].values.push({time: time, y: x * Math.log(x)});
              data[2].values.push({time: time, y: x * Math.pow(Math.log(x), 2)});
              }
              var chart = $('#test-6 .epoch').epoch({
                                                    type: 'time.line',
                                                    data: data,
                                                    axes: ['right', 'bottom']
                                                    });
              var pushPoint = function() {
              var x = (nextIndex +1) * scale,
              time = nextTime();
              chart.push([
                          { time: time, y: x},
                          { time: time, y: x * Math.log(x)},
                          { time: time, y: x * Math.pow(Math.log(x), 2)}
                          ]);
              nextIndex++;
              };
              $('#test-6 button').on('click', function(e) {
                                     if (playing) {
                                     $(e.target).text('Play');
                                     clearInterval(interval);
                                     }
                                     else {
                                     $(e.target).text('Pause');
                                     interval = setInterval(pushPoint, 1000);
                                     pushPoint();
                                     }
                                     playing = !playing;
                                     });
              });
            </script>
  
    </body>
</html>

{% endblock %}
